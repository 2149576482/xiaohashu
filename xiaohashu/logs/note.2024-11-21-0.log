2024-11-21 20:20:47.970 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:20:48.032 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:20:48.714 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:20:48.727 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:20:48.727 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - The following 1 profile is active: "dev"
2024-11-21 20:20:49.284 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-21 20:20:49.288 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-21 20:20:49.312 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2024-11-21 20:20:49.503 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=cc686a35-e8c9-3bcf-8dfb-ec47b259952b
2024-11-21 20:20:49.531 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.distributed.id.generator.api.DistributedGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 20:20:50.035 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8082 (http)
2024-11-21 20:20:50.045 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-21 20:20:50.045 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-21 20:20:50.136 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-21 20:20:50.136 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1393 ms
2024-11-21 20:20:50.225 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-21 20:20:51.517 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-21 20:20:51.809 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 20:20:51.840 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'noteController': Injection of resource dependencies failed
2024-11-21 20:20:51.842 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-21 20:20:51.848 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-21 20:20:51.849 [main] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2024-11-21 20:20:51.870 [main] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-11-21 20:20:51.887 [main] ERROR o.s.b.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

A component required a bean of type 'com.arnanzz.kv.api.NoteContentFeignApi' that could not be found.


Action:

Consider defining a bean of type 'com.arnanzz.kv.api.NoteContentFeignApi' in your configuration.

2024-11-21 20:22:15.048 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:22:15.105 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:22:15.841 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:22:15.851 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:22:15.852 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - The following 1 profile is active: "dev"
2024-11-21 20:22:16.393 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-21 20:22:16.398 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-21 20:22:16.430 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2024-11-21 20:22:16.669 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=ea3fe939-9a36-30f3-8f6f-986e5a3af943
2024-11-21 20:22:16.700 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.kv.api.NoteContentFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 20:22:16.702 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.distributed.id.generator.api.DistributedGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 20:22:17.162 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8082 (http)
2024-11-21 20:22:17.170 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-21 20:22:17.170 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-21 20:22:17.255 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-21 20:22:17.255 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1387 ms
2024-11-21 20:22:17.347 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-21 20:22:19.674 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-21 20:22:19.951 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 20:22:19.994 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 20:22:21.748 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-11-21 20:22:21.830 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8082 (http) with context path ''
2024-11-21 20:22:21.836 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:22:21.837 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-21 20:22:21.837 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-21 20:22:21.837 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-21 20:22:21.859 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-21 20:22:21.859 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-21 20:22:21.860 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-21 20:22:21.865 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-21 20:22:21.865 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-21 20:22:21.869 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-21 20:22:21.877 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of b9c4ba05-c823-46d8-87da-db3bb18973f7
2024-11-21 20:22:21.894 [main] INFO  com.alibaba.nacos.common.remote.client - [b9c4ba05-c823-46d8-87da-db3bb18973f7] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-21 20:22:21.895 [main] INFO  com.alibaba.nacos.common.remote.client - [b9c4ba05-c823-46d8-87da-db3bb18973f7] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-21 20:22:21.895 [main] INFO  com.alibaba.nacos.common.remote.client - [b9c4ba05-c823-46d8-87da-db3bb18973f7] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-21 20:22:21.897 [main] INFO  com.alibaba.nacos.common.remote.client - [b9c4ba05-c823-46d8-87da-db3bb18973f7] Try to connect to server on start up, server: {serverIp = '192.168.117.200', server main port = 8848}
2024-11-21 20:22:21.926 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.117.200 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-21 20:22:24.895 [com.alibaba.nacos.client.naming.grpc.redo.0] WARN  com.alibaba.nacos.client.naming - Grpc Connection is disconnect, skip current redo task
2024-11-21 20:22:25.626 [main] ERROR c.a.nacos.common.remote.client.grpc.GrpcClient - Server check fail, please check server 192.168.117.200 ,port 9848 is available , error ={}
java.util.concurrent.TimeoutException: Waited 3000 milliseconds (plus 10 milliseconds, 697300 nanoseconds delay) for com.alibaba.nacos.shaded.io.grpc.stub.ClientCalls$GrpcFuture@7c816f46[status=PENDING, info=[GrpcFuture{clientCall=PendingCall{realCall=ClientCallImpl{method=MethodDescriptor{fullMethodName=Request/request, type=UNARY, idempotent=false, safe=false, sampledToLocalTracing=true, requestMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@7307ae6, responseMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@49c555c3, schemaDescriptor=com.alibaba.nacos.api.grpc.auto.RequestGrpc$RequestMethodDescriptorSupplier@542aec6}}}}]]
	at com.alibaba.nacos.shaded.com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:508)
	at com.alibaba.nacos.common.remote.client.grpc.GrpcClient.serverCheck(GrpcClient.java:218)
	at com.alibaba.nacos.common.remote.client.grpc.GrpcClient.connectToServer(GrpcClient.java:329)
	at com.alibaba.nacos.common.remote.client.RpcClient.start(RpcClient.java:363)
	at com.alibaba.nacos.client.naming.remote.gprc.NamingGrpcClientProxy.start(NamingGrpcClientProxy.java:105)
	at com.alibaba.nacos.client.naming.remote.gprc.NamingGrpcClientProxy.<init>(NamingGrpcClientProxy.java:98)
	at com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate.<init>(NamingClientProxyDelegate.java:78)
	at com.alibaba.nacos.client.naming.NacosNamingService.init(NacosNamingService.java:102)
	at com.alibaba.nacos.client.naming.NacosNamingService.<init>(NacosNamingService.java:85)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)
	at com.alibaba.nacos.api.naming.NamingFactory.createNamingService(NamingFactory.java:59)
	at com.alibaba.nacos.api.NacosFactory.createNamingService(NacosFactory.java:77)
	at com.alibaba.cloud.nacos.NacosServiceManager.createNewNamingService(NacosServiceManager.java:99)
	at com.alibaba.cloud.nacos.NacosServiceManager.buildNamingService(NacosServiceManager.java:90)
	at com.alibaba.cloud.nacos.NacosServiceManager.getNamingService(NacosServiceManager.java:46)
	at com.alibaba.cloud.nacos.registry.NacosServiceRegistry.namingService(NacosServiceRegistry.java:193)
	at com.alibaba.cloud.nacos.registry.NacosServiceRegistry.register(NacosServiceRegistry.java:68)
	at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.register(AbstractAutoServiceRegistration.java:264)
	at com.alibaba.cloud.nacos.registry.NacosAutoServiceRegistration.register(NacosAutoServiceRegistration.java:78)
	at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.start(AbstractAutoServiceRegistration.java:156)
	at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.onApplicationEvent(AbstractAutoServiceRegistration.java:119)
	at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.onApplicationEvent(AbstractAutoServiceRegistration.java:49)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:413)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:370)
	at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:47)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:356)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:155)
	at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:123)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:932)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:587)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.arnanzz.xiaohashu.note.biz.XiaohashuNoteBizApplication.main(XiaohashuNoteBizApplication.java:19)
2024-11-21 20:22:25.633 [main] INFO  com.alibaba.nacos.common.remote.client - [b9c4ba05-c823-46d8-87da-db3bb18973f7] Try to connect to server on start up, server: {serverIp = '192.168.117.200', server main port = 8848}
2024-11-21 20:22:25.633 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.117.200 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-21 20:22:27.285 [main] INFO  com.alibaba.nacos.common.remote.client - [b9c4ba05-c823-46d8-87da-db3bb18973f7] Success to connect to server [192.168.117.200:8848] on start up, connectionId = 1732191745898_192.168.117.1_59793
2024-11-21 20:22:27.285 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [b9c4ba05-c823-46d8-87da-db3bb18973f7] Notify connected event to listeners.
2024-11-21 20:22:27.285 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-21 20:22:27.285 [main] INFO  com.alibaba.nacos.common.remote.client - [b9c4ba05-c823-46d8-87da-db3bb18973f7] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-21 20:22:27.285 [main] INFO  com.alibaba.nacos.common.remote.client - [b9c4ba05-c823-46d8-87da-db3bb18973f7] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1263/0x00000008014f3a90
2024-11-21 20:22:27.287 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-note with instance Instance{instanceId='null', ip='192.168.117.1', port=8082, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-21 20:22:27.905 [com.alibaba.nacos.client.naming.grpc.redo.0] INFO  com.alibaba.nacos.client.naming - Redo instance operation REGISTER for DEFAULT_GROUP@@xiaohashu-note
2024-11-21 20:22:27.979 [main] ERROR com.alibaba.nacos.common.remote.client - Connection is unregistered, switch server, connectionId = 1732191745898_192.168.117.1_59793, request = InstanceRequest
2024-11-21 20:22:27.979 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [b9c4ba05-c823-46d8-87da-db3bb18973f7] Try to reconnect to a new server, server is  not appointed, will choose a random server.
2024-11-21 20:22:27.980 [com.alibaba.nacos.client.remote.worker] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.117.200 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-21 20:22:28.092 [main] ERROR com.alibaba.nacos.common.remote.client - Send request fail, request = InstanceRequest{headers={app=unknown}, requestId='null'}, retryTimes = 0, errorMessage = Connection is unregistered.
2024-11-21 20:22:28.200 [main] ERROR com.alibaba.nacos.common.remote.client - Send request fail, request = InstanceRequest{headers={app=unknown}, requestId='null'}, retryTimes = 1, errorMessage = Client not connected, current status:UNHEALTHY
2024-11-21 20:22:28.309 [com.alibaba.nacos.client.naming.grpc.redo.0] ERROR com.alibaba.nacos.common.remote.client - Send request fail, request = InstanceRequest{headers={app=unknown}, requestId='null'}, retryTimes = 0, errorMessage = Connection is unregistered.
2024-11-21 20:22:28.309 [main] ERROR com.alibaba.nacos.common.remote.client - Send request fail, request = InstanceRequest{headers={app=unknown}, requestId='null'}, retryTimes = 2, errorMessage = Client not connected, current status:UNHEALTHY
2024-11-21 20:22:28.332 [main] ERROR c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, xiaohashu-note register failed...NacosRegistration{nacosDiscoveryProperties=NacosDiscoveryProperties{serverAddr='192.168.117.200:8848', username='', password='', endpoint='', namespace='xiaohashu', watchDelay=30000, logName='', service='xiaohashu-note', weight=1.0, clusterName='DEFAULT', group='DEFAULT_GROUP', namingLoadCacheAtStart='false', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}, registerEnabled=true, ip='192.168.117.1', networkInterface='', port=8082, secure=false, accessKey='', secretKey='', heartBeatInterval=null, heartBeatTimeout=null, ipDeleteTimeout=null, instanceEnabled=true, ephemeral=true, failureToleranceEnabled=false}, ipDeleteTimeout=null, failFast=true}},
com.alibaba.nacos.api.exception.NacosException: Client not connected, current status:UNHEALTHY
	at com.alibaba.nacos.common.remote.client.RpcClient.request(RpcClient.java:643)
	at com.alibaba.nacos.common.remote.client.RpcClient.request(RpcClient.java:623)
	at com.alibaba.nacos.client.naming.remote.gprc.NamingGrpcClientProxy.requestToServer(NamingGrpcClientProxy.java:357)
	at com.alibaba.nacos.client.naming.remote.gprc.NamingGrpcClientProxy.doRegisterService(NamingGrpcClientProxy.java:210)
	at com.alibaba.nacos.client.naming.remote.gprc.NamingGrpcClientProxy.registerService(NamingGrpcClientProxy.java:124)
	at com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate.registerService(NamingClientProxyDelegate.java:98)
	at com.alibaba.nacos.client.naming.NacosNamingService.registerInstance(NacosNamingService.java:143)
	at com.alibaba.cloud.nacos.registry.NacosServiceRegistry.register(NacosServiceRegistry.java:75)
	at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.register(AbstractAutoServiceRegistration.java:264)
	at com.alibaba.cloud.nacos.registry.NacosAutoServiceRegistration.register(NacosAutoServiceRegistration.java:78)
	at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.start(AbstractAutoServiceRegistration.java:156)
	at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.onApplicationEvent(AbstractAutoServiceRegistration.java:119)
	at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.onApplicationEvent(AbstractAutoServiceRegistration.java:49)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:413)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:370)
	at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:47)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:356)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:155)
	at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:123)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:932)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:587)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.arnanzz.xiaohashu.note.biz.XiaohashuNoteBizApplication.main(XiaohashuNoteBizApplication.java:19)
2024-11-21 20:22:28.333 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2024-11-21 20:22:28.335 [main] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-21 20:22:28.335 [main] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-21 20:22:28.418 [com.alibaba.nacos.client.naming.grpc.redo.0] ERROR com.alibaba.nacos.common.remote.client - Send request fail, request = InstanceRequest{headers={app=unknown}, requestId='null'}, retryTimes = 1, errorMessage = Client not connected, current status:UNHEALTHY
2024-11-21 20:22:28.527 [com.alibaba.nacos.client.naming.grpc.redo.0] ERROR com.alibaba.nacos.common.remote.client - Send request fail, request = InstanceRequest{headers={app=unknown}, requestId='null'}, retryTimes = 2, errorMessage = Client not connected, current status:UNHEALTHY
2024-11-21 20:22:28.527 [com.alibaba.nacos.client.naming.grpc.redo.0] ERROR com.alibaba.nacos.client.naming - Redo instance operation REGISTER for DEFAULT_GROUP@@xiaohashu-note failed. 
com.alibaba.nacos.api.exception.NacosException: Client not connected, current status:UNHEALTHY
	at com.alibaba.nacos.common.remote.client.RpcClient.request(RpcClient.java:643)
	at com.alibaba.nacos.common.remote.client.RpcClient.request(RpcClient.java:623)
	at com.alibaba.nacos.client.naming.remote.gprc.NamingGrpcClientProxy.requestToServer(NamingGrpcClientProxy.java:357)
	at com.alibaba.nacos.client.naming.remote.gprc.NamingGrpcClientProxy.doRegisterService(NamingGrpcClientProxy.java:210)
	at com.alibaba.nacos.client.naming.remote.gprc.redo.RedoScheduledTask.processRegisterRedoType(RedoScheduledTask.java:102)
	at com.alibaba.nacos.client.naming.remote.gprc.redo.RedoScheduledTask.redoForInstance(RedoScheduledTask.java:79)
	at com.alibaba.nacos.client.naming.remote.gprc.redo.RedoScheduledTask.redoForInstances(RedoScheduledTask.java:61)
	at com.alibaba.nacos.client.naming.remote.gprc.redo.RedoScheduledTask.run(RedoScheduledTask.java:51)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:833)
2024-11-21 20:22:28.666 [main] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-21 20:22:28.666 [main] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-21 20:22:28.667 [main] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-21 20:22:28.667 [main] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-21 20:22:28.667 [main] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-21 20:22:28.667 [main] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-21 20:22:28.667 [main] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 20:22:28.667 [main] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 20:22:28.667 [main] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-21 20:22:28.667 [main] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-21 20:22:28.667 [main] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 20:22:28.667 [main] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 20:22:28.667 [main] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-21 20:22:28.667 [main] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-21 20:22:28.667 [main] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@623bdc46[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-21 20:22:28.667 [main] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1732191745898_192.168.117.1_59793
2024-11-21 20:22:28.667 [com.alibaba.nacos.client.remote.worker] ERROR c.a.nacos.common.remote.client.grpc.GrpcClient - Server check fail, please check server 192.168.117.200 ,port 9848 is available , error ={}
java.lang.InterruptedException: null
	at com.alibaba.nacos.shaded.com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:438)
	at com.alibaba.nacos.common.remote.client.grpc.GrpcClient.serverCheck(GrpcClient.java:218)
	at com.alibaba.nacos.common.remote.client.grpc.GrpcClient.connectToServer(GrpcClient.java:329)
	at com.alibaba.nacos.common.remote.client.RpcClient.reconnect(RpcClient.java:502)
	at com.alibaba.nacos.common.remote.client.RpcClient.lambda$start$2(RpcClient.java:343)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:833)
2024-11-21 20:22:28.668 [nacos-grpc-client-executor-192.168.117.200-1] WARN  c.a.nacos.common.remote.client.grpc.GrpcClient - [1732191745898_192.168.117.1_59793]Ignore error event,isRunning:false,isAbandon=false
2024-11-21 20:22:28.668 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1732191745898_192.168.117.1_59793
2024-11-21 20:22:28.668 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@411576c7[Running, pool size = 16, active threads = 1, queued tasks = 0, completed tasks = 17]
2024-11-21 20:22:28.669 [main] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@332610ad[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 2]
2024-11-21 20:22:28.669 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-21 20:22:28.669 [main] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-21 20:22:28.669 [main] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-21 20:22:28.689 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-21 20:22:28.696 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-21 20:22:28.725 [main] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2024-11-21 20:22:28.746 [main] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-11-21 20:22:28.760 [main] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:181)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:356)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:155)
	at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:123)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:932)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:587)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.arnanzz.xiaohashu.note.biz.XiaohashuNoteBizApplication.main(XiaohashuNoteBizApplication.java:19)
Caused by: java.lang.reflect.UndeclaredThrowableException: null
	at org.springframework.util.ReflectionUtils.rethrowRuntimeException(ReflectionUtils.java:147)
	at com.alibaba.cloud.nacos.registry.NacosServiceRegistry.register(NacosServiceRegistry.java:83)
	at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.register(AbstractAutoServiceRegistration.java:264)
	at com.alibaba.cloud.nacos.registry.NacosAutoServiceRegistration.register(NacosAutoServiceRegistration.java:78)
	at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.start(AbstractAutoServiceRegistration.java:156)
	at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.onApplicationEvent(AbstractAutoServiceRegistration.java:119)
	at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.onApplicationEvent(AbstractAutoServiceRegistration.java:49)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:413)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:370)
	at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:47)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178)
	... 13 common frames omitted
Caused by: com.alibaba.nacos.api.exception.NacosException: Client not connected, current status:UNHEALTHY
	at com.alibaba.nacos.common.remote.client.RpcClient.request(RpcClient.java:643)
	at com.alibaba.nacos.common.remote.client.RpcClient.request(RpcClient.java:623)
	at com.alibaba.nacos.client.naming.remote.gprc.NamingGrpcClientProxy.requestToServer(NamingGrpcClientProxy.java:357)
	at com.alibaba.nacos.client.naming.remote.gprc.NamingGrpcClientProxy.doRegisterService(NamingGrpcClientProxy.java:210)
	at com.alibaba.nacos.client.naming.remote.gprc.NamingGrpcClientProxy.registerService(NamingGrpcClientProxy.java:124)
	at com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate.registerService(NamingClientProxyDelegate.java:98)
	at com.alibaba.nacos.client.naming.NacosNamingService.registerInstance(NacosNamingService.java:143)
	at com.alibaba.cloud.nacos.registry.NacosServiceRegistry.register(NacosServiceRegistry.java:75)
	... 25 common frames omitted
2024-11-21 20:22:28.774 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [b9c4ba05-c823-46d8-87da-db3bb18973f7] Client is shutdown, stop reconnect to server
2024-11-21 20:22:29.691 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-21 20:22:29.691 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-21 20:22:29.691 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-21 20:22:29.692 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-21 20:22:47.819 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:22:47.879 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:22:48.586 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:22:48.596 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:22:48.597 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - The following 1 profile is active: "dev"
2024-11-21 20:22:49.134 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-21 20:22:49.137 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-21 20:22:49.156 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2024-11-21 20:22:49.329 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=ea3fe939-9a36-30f3-8f6f-986e5a3af943
2024-11-21 20:22:49.369 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.kv.api.NoteContentFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 20:22:49.371 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.distributed.id.generator.api.DistributedGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 20:22:49.833 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8082 (http)
2024-11-21 20:22:49.841 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-21 20:22:49.842 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-21 20:22:49.936 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-21 20:22:49.937 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1324 ms
2024-11-21 20:22:50.027 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-21 20:22:50.490 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-21 20:22:50.761 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 20:22:50.805 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 20:22:52.590 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-11-21 20:22:52.666 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8082 (http) with context path ''
2024-11-21 20:22:52.670 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:22:52.671 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-21 20:22:52.671 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-21 20:22:52.672 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-21 20:22:52.708 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-21 20:22:52.708 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-21 20:22:52.709 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-21 20:22:52.713 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-21 20:22:52.713 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-21 20:22:52.715 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-21 20:22:52.723 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 85ad11e9-0f5f-4405-acca-941a89052e44
2024-11-21 20:22:52.738 [main] INFO  com.alibaba.nacos.common.remote.client - [85ad11e9-0f5f-4405-acca-941a89052e44] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-21 20:22:52.738 [main] INFO  com.alibaba.nacos.common.remote.client - [85ad11e9-0f5f-4405-acca-941a89052e44] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-21 20:22:52.738 [main] INFO  com.alibaba.nacos.common.remote.client - [85ad11e9-0f5f-4405-acca-941a89052e44] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-21 20:22:52.740 [main] INFO  com.alibaba.nacos.common.remote.client - [85ad11e9-0f5f-4405-acca-941a89052e44] Try to connect to server on start up, server: {serverIp = '192.168.117.200', server main port = 8848}
2024-11-21 20:22:52.766 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.117.200 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-21 20:22:53.814 [main] INFO  com.alibaba.nacos.common.remote.client - [85ad11e9-0f5f-4405-acca-941a89052e44] Success to connect to server [192.168.117.200:8848] on start up, connectionId = 1732191773710_192.168.117.1_59826
2024-11-21 20:22:53.816 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [85ad11e9-0f5f-4405-acca-941a89052e44] Notify connected event to listeners.
2024-11-21 20:22:53.816 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-21 20:22:53.816 [main] INFO  com.alibaba.nacos.common.remote.client - [85ad11e9-0f5f-4405-acca-941a89052e44] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-21 20:22:53.817 [main] INFO  com.alibaba.nacos.common.remote.client - [85ad11e9-0f5f-4405-acca-941a89052e44] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1263/0x00000008014ed8d8
2024-11-21 20:22:53.820 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-note with instance Instance{instanceId='null', ip='192.168.117.1', port=8082, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-21 20:22:54.197 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-note 192.168.117.1:8082 register finished
2024-11-21 20:22:54.548 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - Started XiaohashuNoteBizApplication in 7.645 seconds (process running for 8.474)
2024-11-21 20:24:27.569 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-21 20:24:27.570 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-21 20:24:27.570 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-21 20:24:27.570 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-21 20:24:27.611 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-21 20:24:27.611 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-note with instance: Instance{instanceId='null', ip='192.168.117.1', port=8082, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-21 20:24:27.616 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-21 20:24:27.616 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-21 20:24:27.616 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-21 20:24:27.617 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-21 20:24:27.617 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-21 20:24:27.617 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-21 20:24:27.617 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-21 20:24:27.617 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-21 20:24:27.617 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-21 20:24:27.617 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 20:24:27.617 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 20:24:27.617 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-21 20:24:27.617 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-21 20:24:27.617 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 20:24:27.617 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 20:24:27.617 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-21 20:24:27.617 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-21 20:24:27.617 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@3724b726[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-21 20:24:27.617 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1732191773710_192.168.117.1_59826
2024-11-21 20:24:27.620 [nacos-grpc-client-executor-192.168.117.200-39] WARN  c.a.nacos.common.remote.client.grpc.GrpcClient - [1732191773710_192.168.117.1_59826]Ignore error event,isRunning:false,isAbandon=false
2024-11-21 20:24:27.621 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@1c2e1395[Running, pool size = 7, active threads = 0, queued tasks = 0, completed tasks = 40]
2024-11-21 20:24:27.621 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@7ac9d1da[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 31]
2024-11-21 20:24:27.621 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-21 20:24:27.621 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-21 20:24:27.621 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-21 20:24:27.640 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-21 20:24:27.646 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-21 20:24:32.377 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:24:32.433 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:24:33.125 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:24:33.142 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:24:33.143 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - The following 1 profile is active: "dev"
2024-11-21 20:24:33.855 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-21 20:24:33.859 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-21 20:24:33.885 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2024-11-21 20:24:34.124 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=ea3fe939-9a36-30f3-8f6f-986e5a3af943
2024-11-21 20:24:34.182 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.kv.api.NoteContentFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 20:24:34.184 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.distributed.id.generator.api.DistributedGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 20:24:34.987 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-21 20:24:34.999 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-21 20:24:35.000 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-21 20:24:35.148 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-21 20:24:35.148 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1983 ms
2024-11-21 20:24:35.279 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-21 20:24:36.017 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-21 20:24:36.320 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 20:24:36.379 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 20:24:38.229 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-11-21 20:24:38.309 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-21 20:24:38.314 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:24:38.314 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-21 20:24:38.315 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-21 20:24:38.315 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-21 20:24:38.334 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-21 20:24:38.335 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-21 20:24:38.335 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-21 20:24:38.338 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-21 20:24:38.338 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-21 20:24:38.341 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-21 20:24:38.350 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of d86c2f89-765a-4a70-8f52-3c2466d18a33
2024-11-21 20:24:38.367 [main] INFO  com.alibaba.nacos.common.remote.client - [d86c2f89-765a-4a70-8f52-3c2466d18a33] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-21 20:24:38.367 [main] INFO  com.alibaba.nacos.common.remote.client - [d86c2f89-765a-4a70-8f52-3c2466d18a33] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-21 20:24:38.367 [main] INFO  com.alibaba.nacos.common.remote.client - [d86c2f89-765a-4a70-8f52-3c2466d18a33] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-21 20:24:38.370 [main] INFO  com.alibaba.nacos.common.remote.client - [d86c2f89-765a-4a70-8f52-3c2466d18a33] Try to connect to server on start up, server: {serverIp = '192.168.117.200', server main port = 8848}
2024-11-21 20:24:38.401 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.117.200 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-21 20:24:39.624 [main] INFO  com.alibaba.nacos.common.remote.client - [d86c2f89-765a-4a70-8f52-3c2466d18a33] Success to connect to server [192.168.117.200:8848] on start up, connectionId = 1732191879484_192.168.117.1_59963
2024-11-21 20:24:39.625 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [d86c2f89-765a-4a70-8f52-3c2466d18a33] Notify connected event to listeners.
2024-11-21 20:24:39.625 [main] INFO  com.alibaba.nacos.common.remote.client - [d86c2f89-765a-4a70-8f52-3c2466d18a33] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-21 20:24:39.626 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-21 20:24:39.626 [main] INFO  com.alibaba.nacos.common.remote.client - [d86c2f89-765a-4a70-8f52-3c2466d18a33] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1263/0x00000008014eef50
2024-11-21 20:24:39.626 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-note with instance Instance{instanceId='null', ip='192.168.117.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-21 20:24:39.643 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-note 192.168.117.1:8086 register finished
2024-11-21 20:24:40.122 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - Started XiaohashuNoteBizApplication in 8.659 seconds (process running for 9.375)
2024-11-21 20:46:00.814 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-21 20:46:00.816 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-21 20:46:00.817 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2024-11-21 20:46:00.827 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 20:46:00.831 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 20:46:00.922 [http-nio-8086-exec-1] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 20:46:00.996 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaohashu-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2024-11-21 20:46:01.031 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaohashu-distributed-id-generator -> [{"ip":"192.168.117.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-21 20:46:01.040 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaohashu-distributed-id-generator -> [{"ip":"192.168.117.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-21 20:46:01.587 [nacos-grpc-client-executor-192.168.117.200-299] INFO  com.alibaba.nacos.common.remote.client - [d86c2f89-765a-4a70-8f52-3c2466d18a33] Receive server push request, request = NotifySubscriberRequest, requestId = 4
2024-11-21 20:46:01.587 [nacos-grpc-client-executor-192.168.117.200-299] INFO  com.alibaba.nacos.common.remote.client - [d86c2f89-765a-4a70-8f52-3c2466d18a33] Ack server push request, request = NotifySubscriberRequest, requestId = 4
2024-11-21 20:46:04.923 [http-nio-8086-exec-1] ERROR com.alibaba.druid.filter.stat.StatFilter - slow sql 3254 millis. insert into t_note
     ( id,
      
      
        title,
      
      
        is_content_empty,
      
      
        creator_id,
      
      
        topic_id,
      
      
        topic_name,
      
      
        is_top,
      
      
        `type`,
      
      
        img_uris,
      
      
      
        visible,
      
      
        create_time,
      
      
        update_time,
      
      
        `status` ) 
     values ( ?,
      
      
        ?,
      
      
        ?,
      
      
        ?,
      
      
        ?,
      
      
        ?,
      
      
        ?,
      
      
        ?,
      
      
        ?,
      
      
      
        ?,
      
      
        ?,
      
      
        ?,
      
      
        ? ) [1859579014981615627,"图文笔记测试标题",true,6,1,"高分美剧推荐",false,0,"http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg",0,"2024-11-21 20:46:01","2024-11-21 20:46:01",0]
2024-11-21 20:46:04.925 [http-nio-8086-exec-1] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [笔记发布], 耗时: 4003ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-21 20:46:04.938 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 20:51:49.016 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-21 20:51:49.016 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-21 20:51:49.016 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-21 20:51:49.017 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-21 20:51:49.112 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-21 20:51:49.112 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-note with instance: Instance{instanceId='null', ip='192.168.117.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-21 20:51:49.867 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-21 20:51:49.868 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-21 20:51:49.869 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-21 20:51:49.869 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-21 20:51:49.869 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-21 20:51:49.870 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-21 20:51:49.870 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-21 20:51:49.870 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-21 20:51:49.870 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-21 20:51:49.870 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 20:51:49.871 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 20:51:49.871 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-21 20:51:49.871 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-21 20:51:49.871 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 20:51:49.872 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 20:51:49.872 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-21 20:51:49.872 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-21 20:51:49.872 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@10395c03[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-21 20:51:49.872 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1732191879484_192.168.117.1_59963
2024-11-21 20:51:49.877 [nacos-grpc-client-executor-192.168.117.200-370] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1732191879484_192.168.117.1_59963]Ignore complete event,isRunning:false,isAbandon=false
2024-11-21 20:51:49.882 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@6dbe2210[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 371]
2024-11-21 20:51:49.882 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@7d40e9fe[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 542]
2024-11-21 20:51:49.883 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-21 20:51:49.883 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-21 20:51:49.883 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-21 20:51:49.899 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-21 20:51:49.901 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-21 20:51:59.324 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:51:59.384 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:52:00.081 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:52:00.093 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:52:00.094 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - The following 1 profile is active: "dev"
2024-11-21 20:52:00.636 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-21 20:52:00.639 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-21 20:52:00.660 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2024-11-21 20:52:00.865 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=ea3fe939-9a36-30f3-8f6f-986e5a3af943
2024-11-21 20:52:00.910 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.kv.api.NoteContentFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 20:52:00.912 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.distributed.id.generator.api.DistributedGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 20:52:01.411 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-21 20:52:01.420 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-21 20:52:01.420 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-21 20:52:01.515 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-21 20:52:01.515 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1405 ms
2024-11-21 20:52:01.655 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-21 20:52:02.155 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-21 20:52:02.493 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 20:52:02.553 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 20:52:04.561 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-11-21 20:52:04.637 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-21 20:52:04.643 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:52:04.643 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-21 20:52:04.644 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-21 20:52:04.645 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-21 20:52:04.664 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-21 20:52:04.664 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-21 20:52:04.664 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-21 20:52:04.669 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-21 20:52:04.669 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-21 20:52:04.671 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-21 20:52:04.679 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 696b6e95-b32c-4b77-bd62-aa23305edc10
2024-11-21 20:52:04.695 [main] INFO  com.alibaba.nacos.common.remote.client - [696b6e95-b32c-4b77-bd62-aa23305edc10] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-21 20:52:04.696 [main] INFO  com.alibaba.nacos.common.remote.client - [696b6e95-b32c-4b77-bd62-aa23305edc10] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-21 20:52:04.696 [main] INFO  com.alibaba.nacos.common.remote.client - [696b6e95-b32c-4b77-bd62-aa23305edc10] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-21 20:52:04.697 [main] INFO  com.alibaba.nacos.common.remote.client - [696b6e95-b32c-4b77-bd62-aa23305edc10] Try to connect to server on start up, server: {serverIp = '192.168.117.200', server main port = 8848}
2024-11-21 20:52:04.727 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.117.200 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-21 20:52:05.853 [main] INFO  com.alibaba.nacos.common.remote.client - [696b6e95-b32c-4b77-bd62-aa23305edc10] Success to connect to server [192.168.117.200:8848] on start up, connectionId = 1732193525756_192.168.117.1_61121
2024-11-21 20:52:05.853 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [696b6e95-b32c-4b77-bd62-aa23305edc10] Notify connected event to listeners.
2024-11-21 20:52:05.853 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-21 20:52:05.854 [main] INFO  com.alibaba.nacos.common.remote.client - [696b6e95-b32c-4b77-bd62-aa23305edc10] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-21 20:52:05.854 [main] INFO  com.alibaba.nacos.common.remote.client - [696b6e95-b32c-4b77-bd62-aa23305edc10] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1263/0x000000080150dae0
2024-11-21 20:52:05.856 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-note with instance Instance{instanceId='null', ip='192.168.117.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-21 20:52:05.871 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-note 192.168.117.1:8086 register finished
2024-11-21 20:52:06.247 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - Started XiaohashuNoteBizApplication in 7.845 seconds (process running for 8.762)
2024-11-21 20:52:21.254 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-21 20:52:21.255 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-21 20:52:21.256 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-11-21 20:52:21.267 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 20:52:21.273 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 20:52:21.375 [http-nio-8086-exec-1] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 20:52:21.452 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaohashu-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2024-11-21 20:52:21.470 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaohashu-distributed-id-generator -> [{"ip":"192.168.117.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-21 20:52:21.482 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaohashu-distributed-id-generator -> [{"ip":"192.168.117.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-21 20:52:21.916 [http-nio-8086-exec-1] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [笔记发布], 耗时: 544ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-21 20:52:21.928 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 20:52:22.017 [nacos-grpc-client-executor-192.168.117.200-16] INFO  com.alibaba.nacos.common.remote.client - [696b6e95-b32c-4b77-bd62-aa23305edc10] Receive server push request, request = NotifySubscriberRequest, requestId = 7
2024-11-21 20:52:22.017 [nacos-grpc-client-executor-192.168.117.200-16] INFO  com.alibaba.nacos.common.remote.client - [696b6e95-b32c-4b77-bd62-aa23305edc10] Ack server push request, request = NotifySubscriberRequest, requestId = 7
2024-11-21 20:53:24.766 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-21 20:53:24.766 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-21 20:53:24.767 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-21 20:53:24.767 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-21 20:53:24.873 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-21 20:53:24.873 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-note with instance: Instance{instanceId='null', ip='192.168.117.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-21 20:53:24.877 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-21 20:53:24.878 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-21 20:53:24.878 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-21 20:53:24.878 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-21 20:53:24.878 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-21 20:53:24.879 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-21 20:53:24.879 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-21 20:53:24.879 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-21 20:53:24.879 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-21 20:53:24.879 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 20:53:24.879 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 20:53:24.879 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-21 20:53:24.879 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-21 20:53:24.879 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 20:53:24.879 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 20:53:24.879 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-21 20:53:24.879 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-21 20:53:24.879 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@58937464[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-21 20:53:24.879 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1732193525756_192.168.117.1_61121
2024-11-21 20:53:24.884 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@4d3d4afb[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 36]
2024-11-21 20:53:24.884 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@3ffeed81[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 26]
2024-11-21 20:53:24.886 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-21 20:53:24.887 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-21 20:53:24.887 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-21 20:53:24.908 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-21 20:53:24.915 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-21 20:53:30.785 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:53:30.839 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:53:31.512 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:53:31.523 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:53:31.524 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - The following 1 profile is active: "dev"
2024-11-21 20:53:32.036 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-21 20:53:32.037 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-21 20:53:32.057 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2024-11-21 20:53:32.234 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=ea3fe939-9a36-30f3-8f6f-986e5a3af943
2024-11-21 20:53:32.267 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.kv.api.NoteContentFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 20:53:32.269 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.distributed.id.generator.api.DistributedGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 20:53:32.735 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-21 20:53:32.743 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-21 20:53:32.743 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-21 20:53:32.835 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-21 20:53:32.835 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1297 ms
2024-11-21 20:53:32.917 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-21 20:53:33.337 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-21 20:53:33.601 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 20:53:33.641 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 20:53:35.303 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-11-21 20:53:35.381 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-21 20:53:35.386 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:53:35.386 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-21 20:53:35.387 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-21 20:53:35.387 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-21 20:53:35.406 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-21 20:53:35.406 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-21 20:53:35.407 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-21 20:53:35.410 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-21 20:53:35.410 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-21 20:53:35.412 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-21 20:53:35.420 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of f09a8736-96e1-49ce-a14e-9d8aa9006bc7
2024-11-21 20:53:35.434 [main] INFO  com.alibaba.nacos.common.remote.client - [f09a8736-96e1-49ce-a14e-9d8aa9006bc7] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-21 20:53:35.434 [main] INFO  com.alibaba.nacos.common.remote.client - [f09a8736-96e1-49ce-a14e-9d8aa9006bc7] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-21 20:53:35.434 [main] INFO  com.alibaba.nacos.common.remote.client - [f09a8736-96e1-49ce-a14e-9d8aa9006bc7] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-21 20:53:35.436 [main] INFO  com.alibaba.nacos.common.remote.client - [f09a8736-96e1-49ce-a14e-9d8aa9006bc7] Try to connect to server on start up, server: {serverIp = '192.168.117.200', server main port = 8848}
2024-11-21 20:53:35.463 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.117.200 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-21 20:53:36.585 [main] INFO  com.alibaba.nacos.common.remote.client - [f09a8736-96e1-49ce-a14e-9d8aa9006bc7] Success to connect to server [192.168.117.200:8848] on start up, connectionId = 1732193616508_192.168.117.1_61186
2024-11-21 20:53:36.585 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [f09a8736-96e1-49ce-a14e-9d8aa9006bc7] Notify connected event to listeners.
2024-11-21 20:53:36.585 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-21 20:53:36.585 [main] INFO  com.alibaba.nacos.common.remote.client - [f09a8736-96e1-49ce-a14e-9d8aa9006bc7] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-21 20:53:36.586 [main] INFO  com.alibaba.nacos.common.remote.client - [f09a8736-96e1-49ce-a14e-9d8aa9006bc7] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1263/0x00000008014ed630
2024-11-21 20:53:36.586 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-note with instance Instance{instanceId='null', ip='192.168.117.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-21 20:53:36.597 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-note 192.168.117.1:8086 register finished
2024-11-21 20:53:36.960 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - Started XiaohashuNoteBizApplication in 7.045 seconds (process running for 7.771)
2024-11-21 20:54:24.349 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-21 20:54:24.349 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-21 20:54:24.351 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-11-21 20:54:24.372 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 20:54:24.378 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 20:54:24.463 [http-nio-8086-exec-1] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 20:54:24.523 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaohashu-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2024-11-21 20:54:24.536 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaohashu-distributed-id-generator -> [{"ip":"192.168.117.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-21 20:54:24.545 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaohashu-distributed-id-generator -> [{"ip":"192.168.117.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-21 20:54:24.583 [http-nio-8086-exec-1] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: USER-10001, errorMessage: For input string: "7ae38425-a775-4bd9-971f-35343e8295b3"
2024-11-21 20:54:24.595 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 20:54:25.082 [nacos-grpc-client-executor-192.168.117.200-25] INFO  com.alibaba.nacos.common.remote.client - [f09a8736-96e1-49ce-a14e-9d8aa9006bc7] Receive server push request, request = NotifySubscriberRequest, requestId = 10
2024-11-21 20:54:25.083 [nacos-grpc-client-executor-192.168.117.200-25] INFO  com.alibaba.nacos.common.remote.client - [f09a8736-96e1-49ce-a14e-9d8aa9006bc7] Ack server push request, request = NotifySubscriberRequest, requestId = 10
2024-11-21 20:55:00.838 [http-nio-8086-exec-2] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 20:55:00.838 [http-nio-8086-exec-2] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 20:55:00.839 [http-nio-8086-exec-2] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 20:55:00.844 [http-nio-8086-exec-2] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: USER-10001, errorMessage: For input string: "926662f3-bb07-4ab1-955b-cec8cc6162f6"
2024-11-21 20:55:00.845 [http-nio-8086-exec-2] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 20:56:48.121 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-21 20:56:48.121 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-21 20:56:48.121 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-21 20:56:48.122 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-21 20:56:48.172 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-21 20:56:48.172 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-note with instance: Instance{instanceId='null', ip='192.168.117.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-21 20:56:48.177 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-21 20:56:48.178 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-21 20:56:48.178 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-21 20:56:48.178 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-21 20:56:48.178 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-21 20:56:48.178 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-21 20:56:48.178 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-21 20:56:48.178 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-21 20:56:48.178 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-21 20:56:48.178 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 20:56:48.178 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 20:56:48.178 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-21 20:56:48.178 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-21 20:56:48.179 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 20:56:48.179 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 20:56:48.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-21 20:56:48.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-21 20:56:48.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@6a25dd32[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-21 20:56:48.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1732193616508_192.168.117.1_61186
2024-11-21 20:56:48.181 [nacos-grpc-client-executor-192.168.117.200-68] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1732193616508_192.168.117.1_61186]Ignore complete event,isRunning:false,isAbandon=false
2024-11-21 20:56:48.183 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@db6ec54[Running, pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 69]
2024-11-21 20:56:48.183 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@597ca4b5[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 64]
2024-11-21 20:56:48.183 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-21 20:56:48.183 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-21 20:56:48.183 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-21 20:56:48.198 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-21 20:56:48.203 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-21 20:56:53.509 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:56:53.573 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:56:54.278 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:56:54.290 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:56:54.290 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - The following 1 profile is active: "dev"
2024-11-21 20:56:54.968 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-21 20:56:54.970 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-21 20:56:54.992 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2024-11-21 20:56:55.196 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=ea3fe939-9a36-30f3-8f6f-986e5a3af943
2024-11-21 20:56:55.233 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.kv.api.NoteContentFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 20:56:55.236 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.distributed.id.generator.api.DistributedGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 20:56:55.800 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-21 20:56:55.810 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-21 20:56:55.810 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-21 20:56:55.914 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-21 20:56:55.915 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1603 ms
2024-11-21 20:56:56.006 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-21 20:56:56.525 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-21 20:56:56.841 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 20:56:56.885 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 20:56:58.797 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-11-21 20:56:58.886 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-21 20:56:58.892 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 20:56:58.892 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-21 20:56:58.893 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-21 20:56:58.894 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-21 20:56:58.915 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-21 20:56:58.915 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-21 20:56:58.916 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-21 20:56:58.920 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-21 20:56:58.920 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-21 20:56:58.922 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-21 20:56:58.930 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of bde902c2-c4d3-4d90-ba44-e67ad5abf8ca
2024-11-21 20:56:58.949 [main] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-21 20:56:58.949 [main] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-21 20:56:58.949 [main] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-21 20:56:58.951 [main] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Try to connect to server on start up, server: {serverIp = '192.168.117.200', server main port = 8848}
2024-11-21 20:56:58.981 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.117.200 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-21 20:57:00.301 [main] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Success to connect to server [192.168.117.200:8848] on start up, connectionId = 1732193820204_192.168.117.1_61345
2024-11-21 20:57:00.302 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Notify connected event to listeners.
2024-11-21 20:57:00.302 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-21 20:57:00.302 [main] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-21 20:57:00.302 [main] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1263/0x000000080150e608
2024-11-21 20:57:00.303 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-note with instance Instance{instanceId='null', ip='192.168.117.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-21 20:57:00.316 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-note 192.168.117.1:8086 register finished
2024-11-21 20:57:00.703 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - Started XiaohashuNoteBizApplication in 8.527 seconds (process running for 9.362)
2024-11-21 20:57:17.007 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-21 20:57:17.008 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-21 20:57:17.009 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-11-21 20:57:17.019 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 20:57:17.024 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 20:57:17.120 [http-nio-8086-exec-1] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 20:57:17.188 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaohashu-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2024-11-21 20:57:17.203 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaohashu-distributed-id-generator -> [{"ip":"192.168.117.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-21 20:57:17.213 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaohashu-distributed-id-generator -> [{"ip":"192.168.117.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-21 20:57:17.266 [http-nio-8086-exec-1] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "8c0560ef-83fe-44cc-ab54-6e1b0745930d"
2024-11-21 20:57:17.280 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 20:57:17.716 [nacos-grpc-client-executor-192.168.117.200-15] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Receive server push request, request = NotifySubscriberRequest, requestId = 13
2024-11-21 20:57:17.716 [nacos-grpc-client-executor-192.168.117.200-15] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Ack server push request, request = NotifySubscriberRequest, requestId = 13
2024-11-21 20:58:14.856 [http-nio-8086-exec-2] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 20:58:14.856 [http-nio-8086-exec-2] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 20:58:14.858 [http-nio-8086-exec-2] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 20:58:14.862 [http-nio-8086-exec-2] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "42d852d6-87ad-4f8c-b234-56e612b4d2e1"
2024-11-21 20:58:14.862 [http-nio-8086-exec-2] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:08:18.486 [http-nio-8086-exec-4] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:08:18.486 [http-nio-8086-exec-4] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:08:18.487 [http-nio-8086-exec-4] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:08:18.492 [http-nio-8086-exec-4] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "3c7df033-1442-4f88-b1cd-0509bf0fe4f5"
2024-11-21 21:08:18.493 [http-nio-8086-exec-4] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:08:47.626 [http-nio-8086-exec-5] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:08:47.626 [http-nio-8086-exec-5] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:08:47.626 [http-nio-8086-exec-5] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:11:44.017 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Server healthy check fail, currentConnection = 1732193820204_192.168.117.1_61345
2024-11-21 21:11:44.019 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Try to reconnect to a new server, server is  not appointed, will choose a random server.
2024-11-21 21:11:44.021 [com.alibaba.nacos.client.remote.worker] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.117.200 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-21 21:12:18.325 [http-nio-8086-exec-5] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "3a623235-3ca4-48da-b6bd-e683987cc260"
2024-11-21 21:11:55.043 [com.alibaba.nacos.client.remote.worker] ERROR c.a.nacos.common.remote.client.grpc.GrpcClient - Server check fail, please check server 192.168.117.200 ,port 9848 is available , error ={}
java.util.concurrent.TimeoutException: Waited 3000 milliseconds (plus 3884 milliseconds, 934600 nanoseconds delay) for com.alibaba.nacos.shaded.io.grpc.stub.ClientCalls$GrpcFuture@64e81d04[status=PENDING, info=[GrpcFuture{clientCall=PendingCall{realCall=ClientCallImpl{method=MethodDescriptor{fullMethodName=Request/request, type=UNARY, idempotent=false, safe=false, sampledToLocalTracing=true, requestMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@ceb6ae8, responseMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@2598b279, schemaDescriptor=com.alibaba.nacos.api.grpc.auto.RequestGrpc$RequestMethodDescriptorSupplier@36918329}}}}]]
	at com.alibaba.nacos.shaded.com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:508)
	at com.alibaba.nacos.common.remote.client.grpc.GrpcClient.serverCheck(GrpcClient.java:218)
	at com.alibaba.nacos.common.remote.client.grpc.GrpcClient.connectToServer(GrpcClient.java:329)
	at com.alibaba.nacos.common.remote.client.RpcClient.reconnect(RpcClient.java:502)
	at com.alibaba.nacos.common.remote.client.RpcClient.lambda$start$2(RpcClient.java:343)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:833)
2024-11-21 21:12:18.326 [http-nio-8086-exec-5] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:12:18.437 [com.alibaba.nacos.client.remote.worker] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.117.200 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-21 21:12:18.560 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Success to connect a server [192.168.117.200:8848], connectionId = 1732194738543_192.168.117.1_61911
2024-11-21 21:12:18.560 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Abandon prev connection, server is 192.168.117.200:8848, connectionId is 1732193820204_192.168.117.1_61345
2024-11-21 21:12:18.560 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1732193820204_192.168.117.1_61345
2024-11-21 21:12:18.560 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Notify disconnected event to listeners
2024-11-21 21:12:18.560 [com.alibaba.nacos.client.remote.worker] WARN  com.alibaba.nacos.client.naming - Grpc connection disconnect, mark to redo
2024-11-21 21:12:18.561 [com.alibaba.nacos.client.remote.worker] WARN  com.alibaba.nacos.client.naming - mark to redo completed
2024-11-21 21:12:18.561 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Notify connected event to listeners.
2024-11-21 21:12:18.561 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-21 21:12:18.562 [nacos-grpc-client-executor-192.168.117.200-194] WARN  c.a.nacos.common.remote.client.grpc.GrpcClient - [1732193820204_192.168.117.1_61345]Ignore error event,isRunning:true,isAbandon=true
2024-11-21 21:12:21.329 [com.alibaba.nacos.client.naming.grpc.redo.0] INFO  com.alibaba.nacos.client.naming - Redo instance operation REGISTER for DEFAULT_GROUP@@xiaohashu-note
2024-11-21 21:12:21.335 [com.alibaba.nacos.client.naming.grpc.redo.0] INFO  com.alibaba.nacos.client.naming - Redo subscriber operation REGISTER for DEFAULT_GROUP@@xiaohashu-distributed-id-generator#
2024-11-21 21:12:21.902 [nacos-grpc-client-executor-192.168.117.200-197] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Receive server push request, request = NotifySubscriberRequest, requestId = 18
2024-11-21 21:12:21.902 [nacos-grpc-client-executor-192.168.117.200-197] INFO  com.alibaba.nacos.common.remote.client - [bde902c2-c4d3-4d90-ba44-e67ad5abf8ca] Ack server push request, request = NotifySubscriberRequest, requestId = 18
2024-11-21 21:12:30.292 [http-nio-8086-exec-6] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:12:30.292 [http-nio-8086-exec-6] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:12:30.293 [http-nio-8086-exec-6] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:13:25.655 [http-nio-8086-exec-6] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "f08c76a4-7f0b-4d3f-8631-ea4112d2af6c"
2024-11-21 21:13:25.656 [http-nio-8086-exec-6] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:19:16.462 [http-nio-8086-exec-8] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:19:16.462 [http-nio-8086-exec-8] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:19:16.463 [http-nio-8086-exec-8] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:19:25.431 [http-nio-8086-exec-8] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "5ad43bb7-3de9-41dc-a9e9-c3f57bc7344f"
2024-11-21 21:19:25.432 [http-nio-8086-exec-8] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:20:18.411 [http-nio-8086-exec-9] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:20:18.412 [http-nio-8086-exec-9] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:20:18.413 [http-nio-8086-exec-9] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:20:30.482 [http-nio-8086-exec-9] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "123e85bb-eeca-4d38-b622-8a51e04362c6"
2024-11-21 21:20:30.483 [http-nio-8086-exec-9] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:20:55.276 [http-nio-8086-exec-10] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:20:55.276 [http-nio-8086-exec-10] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:20:55.277 [http-nio-8086-exec-10] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:20:55.281 [http-nio-8086-exec-10] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "775fda51-6264-44ac-899d-e22db5cd59c8"
2024-11-21 21:20:55.282 [http-nio-8086-exec-10] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:21:06.644 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:21:06.644 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:21:06.645 [http-nio-8086-exec-1] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:21:12.353 [http-nio-8086-exec-1] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "ae4525b4-50e8-468a-9544-9c85355ab155"
2024-11-21 21:21:12.353 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:21:16.095 [http-nio-8086-exec-2] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:21:16.095 [http-nio-8086-exec-2] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:21:16.096 [http-nio-8086-exec-2] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:21:55.739 [http-nio-8086-exec-2] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "7ab21f14-f123-4061-ab28-dee60b080762"
2024-11-21 21:21:55.740 [http-nio-8086-exec-2] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:22:00.097 [http-nio-8086-exec-3] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:22:00.098 [http-nio-8086-exec-3] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:22:00.098 [http-nio-8086-exec-3] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:23:31.200 [http-nio-8086-exec-3] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "66968ba7-eb1b-473a-97f1-929655abefec"
2024-11-21 21:23:31.201 [http-nio-8086-exec-3] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:29:23.126 [http-nio-8086-exec-5] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:29:23.126 [http-nio-8086-exec-5] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:29:23.127 [http-nio-8086-exec-5] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:29:25.939 [http-nio-8086-exec-5] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "6ccee043-dd4a-49c3-bc16-0936c3e548b5"
2024-11-21 21:29:25.940 [http-nio-8086-exec-5] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:29:34.377 [http-nio-8086-exec-6] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:29:34.378 [http-nio-8086-exec-6] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:29:34.379 [http-nio-8086-exec-6] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:29:34.383 [http-nio-8086-exec-6] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "d4318aa5-089d-49e1-99b5-535b7086c164"
2024-11-21 21:29:34.385 [http-nio-8086-exec-6] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:31:52.376 [http-nio-8086-exec-8] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:31:52.376 [http-nio-8086-exec-8] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:31:52.377 [http-nio-8086-exec-8] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:34:47.436 [http-nio-8086-exec-8] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "2c370fd4-4338-46c8-ba58-c22cca4a5971"
2024-11-21 21:34:47.438 [http-nio-8086-exec-8] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:34:55.647 [http-nio-8086-exec-9] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:34:55.647 [http-nio-8086-exec-9] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:34:55.648 [http-nio-8086-exec-9] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:36:28.819 [http-nio-8086-exec-9] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "fe162c70-bc9a-41dc-856c-663a72d950d7"
2024-11-21 21:36:28.820 [http-nio-8086-exec-9] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:36:33.776 [http-nio-8086-exec-10] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:36:33.776 [http-nio-8086-exec-10] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:36:33.782 [http-nio-8086-exec-10] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:36:33.788 [http-nio-8086-exec-10] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "67eb1096-07da-45b4-9829-3b0176825870"
2024-11-21 21:36:33.790 [http-nio-8086-exec-10] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:36:51.282 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:36:51.282 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:36:51.283 [http-nio-8086-exec-1] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:38:18.848 [http-nio-8086-exec-1] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request error, errorCode: NOTE-10001, errorMessage: For input string: "02dbf5e4-c22a-42b7-a3a7-eb174c0fd368"
2024-11-21 21:38:18.849 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:38:18.889 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-21 21:38:18.890 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-21 21:38:18.890 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-21 21:38:18.890 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-21 21:38:18.996 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-21 21:38:18.996 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-note with instance: Instance{instanceId='null', ip='192.168.117.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-21 21:38:19.001 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-21 21:38:19.001 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-21 21:38:19.001 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-21 21:38:19.002 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-21 21:38:19.002 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-21 21:38:19.002 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-21 21:38:19.002 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-21 21:38:19.002 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-21 21:38:19.002 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-21 21:38:19.002 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 21:38:19.002 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 21:38:19.002 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-21 21:38:19.002 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-21 21:38:19.002 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 21:38:19.002 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 21:38:19.002 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-21 21:38:19.002 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-21 21:38:19.002 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@399936f1[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-21 21:38:19.002 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1732194738543_192.168.117.1_61911
2024-11-21 21:38:19.003 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@3dfcf0b6[Running, pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 413]
2024-11-21 21:38:19.003 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@60756e21[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 597]
2024-11-21 21:38:19.003 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-21 21:38:19.003 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-21 21:38:19.004 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-21 21:38:19.031 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-21 21:38:19.033 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-21 21:39:31.499 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 21:39:31.552 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 21:39:32.208 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 21:39:32.219 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 21:39:32.220 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - The following 1 profile is active: "dev"
2024-11-21 21:39:32.761 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-21 21:39:32.764 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-21 21:39:32.788 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2024-11-21 21:39:32.989 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=ea3fe939-9a36-30f3-8f6f-986e5a3af943
2024-11-21 21:39:33.022 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.kv.api.NoteContentFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 21:39:33.025 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.distributed.id.generator.api.DistributedGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 21:39:33.564 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-21 21:39:33.575 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-21 21:39:33.576 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-21 21:39:33.676 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-21 21:39:33.677 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1441 ms
2024-11-21 21:39:33.770 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-21 21:39:34.361 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-21 21:39:34.659 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 21:39:34.701 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 21:39:36.628 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-11-21 21:39:36.726 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-21 21:39:36.731 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 21:39:36.732 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-21 21:39:36.732 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-21 21:39:36.733 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-21 21:39:36.753 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-21 21:39:36.753 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-21 21:39:36.755 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-21 21:39:36.759 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-21 21:39:36.759 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-21 21:39:36.762 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-21 21:39:36.769 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of c9dd9372-8c73-42c8-bf01-f16d26617ea6
2024-11-21 21:39:36.788 [main] INFO  com.alibaba.nacos.common.remote.client - [c9dd9372-8c73-42c8-bf01-f16d26617ea6] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-21 21:39:36.788 [main] INFO  com.alibaba.nacos.common.remote.client - [c9dd9372-8c73-42c8-bf01-f16d26617ea6] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-21 21:39:36.788 [main] INFO  com.alibaba.nacos.common.remote.client - [c9dd9372-8c73-42c8-bf01-f16d26617ea6] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-21 21:39:36.790 [main] INFO  com.alibaba.nacos.common.remote.client - [c9dd9372-8c73-42c8-bf01-f16d26617ea6] Try to connect to server on start up, server: {serverIp = '192.168.117.200', server main port = 8848}
2024-11-21 21:39:36.824 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.117.200 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-21 21:39:38.119 [main] INFO  com.alibaba.nacos.common.remote.client - [c9dd9372-8c73-42c8-bf01-f16d26617ea6] Success to connect to server [192.168.117.200:8848] on start up, connectionId = 1732196378022_192.168.117.1_63129
2024-11-21 21:39:38.119 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [c9dd9372-8c73-42c8-bf01-f16d26617ea6] Notify connected event to listeners.
2024-11-21 21:39:38.120 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-21 21:39:38.120 [main] INFO  com.alibaba.nacos.common.remote.client - [c9dd9372-8c73-42c8-bf01-f16d26617ea6] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-21 21:39:38.120 [main] INFO  com.alibaba.nacos.common.remote.client - [c9dd9372-8c73-42c8-bf01-f16d26617ea6] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1263/0x00000008014edb80
2024-11-21 21:39:38.121 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-note with instance Instance{instanceId='null', ip='192.168.117.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-21 21:39:38.460 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-note 192.168.117.1:8086 register finished
2024-11-21 21:39:38.883 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - Started XiaohashuNoteBizApplication in 8.336 seconds (process running for 9.41)
2024-11-21 21:40:31.117 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-21 21:40:31.117 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-21 21:40:31.118 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-11-21 21:40:31.129 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:40:31.143 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:40:31.231 [http-nio-8086-exec-1] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:40:31.298 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaohashu-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2024-11-21 21:40:31.310 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaohashu-distributed-id-generator -> [{"ip":"192.168.117.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-21 21:40:31.317 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaohashu-distributed-id-generator -> [{"ip":"192.168.117.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-21 21:40:31.455 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaohashu-kv, group:DEFAULT_GROUP, clusters: 
2024-11-21 21:40:31.460 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaohashu-kv -> [{"ip":"192.168.117.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-21 21:40:31.460 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaohashu-kv -> [{"ip":"192.168.117.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-21 21:40:31.838 [nacos-grpc-client-executor-192.168.117.200-25] INFO  com.alibaba.nacos.common.remote.client - [c9dd9372-8c73-42c8-bf01-f16d26617ea6] Receive server push request, request = NotifySubscriberRequest, requestId = 21
2024-11-21 21:40:31.838 [nacos-grpc-client-executor-192.168.117.200-25] INFO  com.alibaba.nacos.common.remote.client - [c9dd9372-8c73-42c8-bf01-f16d26617ea6] Ack server push request, request = NotifySubscriberRequest, requestId = 21
2024-11-21 21:40:32.006 [nacos-grpc-client-executor-192.168.117.200-26] INFO  com.alibaba.nacos.common.remote.client - [c9dd9372-8c73-42c8-bf01-f16d26617ea6] Receive server push request, request = NotifySubscriberRequest, requestId = 22
2024-11-21 21:40:32.007 [nacos-grpc-client-executor-192.168.117.200-26] INFO  com.alibaba.nacos.common.remote.client - [c9dd9372-8c73-42c8-bf01-f16d26617ea6] Ack server push request, request = NotifySubscriberRequest, requestId = 22
2024-11-21 21:40:33.687 [http-nio-8086-exec-1] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request fail, errorCode: NOTE-20001, errorMessage: 笔记发布失败
2024-11-21 21:40:33.695 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:41:04.912 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-21 21:41:04.912 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-21 21:41:04.912 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-21 21:41:04.913 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-21 21:41:05.020 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-21 21:41:05.020 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-note with instance: Instance{instanceId='null', ip='192.168.117.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-21 21:41:05.026 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-21 21:41:05.026 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-21 21:41:05.026 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-21 21:41:05.027 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-21 21:41:05.027 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-21 21:41:05.027 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-21 21:41:05.027 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-21 21:41:05.027 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-21 21:41:05.027 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-21 21:41:05.027 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 21:41:05.027 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 21:41:05.027 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-21 21:41:05.027 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-21 21:41:05.028 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 21:41:05.028 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 21:41:05.028 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-21 21:41:05.028 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-21 21:41:05.028 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@2a84d120[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-21 21:41:05.028 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1732196378022_192.168.117.1_63129
2024-11-21 21:41:05.030 [nacos-grpc-client-executor-192.168.117.200-37] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1732196378022_192.168.117.1_63129]Ignore complete event,isRunning:false,isAbandon=false
2024-11-21 21:41:05.032 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@266c4f7e[Running, pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 38]
2024-11-21 21:41:05.032 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@709969ea[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 29]
2024-11-21 21:41:05.033 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-21 21:41:05.033 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-21 21:41:05.033 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-21 21:41:05.053 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-21 21:41:05.059 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-21 21:41:10.295 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 21:41:10.365 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 21:41:11.121 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 21:41:11.138 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 21:41:11.139 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - The following 1 profile is active: "dev"
2024-11-21 21:41:11.732 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-21 21:41:11.735 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-21 21:41:11.762 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2024-11-21 21:41:11.960 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=ea3fe939-9a36-30f3-8f6f-986e5a3af943
2024-11-21 21:41:11.997 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.kv.api.NoteContentFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 21:41:12.000 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.distributed.id.generator.api.DistributedGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 21:41:12.511 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-21 21:41:12.522 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-21 21:41:12.522 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-21 21:41:12.623 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-21 21:41:12.623 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1457 ms
2024-11-21 21:41:12.716 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-21 21:41:13.251 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-21 21:41:13.568 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 21:41:13.635 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 21:41:15.473 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-11-21 21:41:15.571 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-21 21:41:15.578 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 21:41:15.578 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-21 21:41:15.580 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-21 21:41:15.580 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-21 21:41:15.606 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-21 21:41:15.606 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-21 21:41:15.608 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-21 21:41:15.612 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-21 21:41:15.612 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-21 21:41:15.615 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-21 21:41:15.623 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 61bf27aa-0d6f-4f19-9eca-772c7ad182e0
2024-11-21 21:41:15.642 [main] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-21 21:41:15.642 [main] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-21 21:41:15.643 [main] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-21 21:41:15.645 [main] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Try to connect to server on start up, server: {serverIp = '192.168.117.200', server main port = 8848}
2024-11-21 21:41:15.680 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.117.200 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-21 21:41:16.833 [main] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Success to connect to server [192.168.117.200:8848] on start up, connectionId = 1732196476780_192.168.117.1_63277
2024-11-21 21:41:16.833 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Notify connected event to listeners.
2024-11-21 21:41:16.833 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-21 21:41:16.834 [main] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-21 21:41:16.834 [main] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1263/0x000000080150dae0
2024-11-21 21:41:16.835 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-note with instance Instance{instanceId='null', ip='192.168.117.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-21 21:41:16.849 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-note 192.168.117.1:8086 register finished
2024-11-21 21:41:17.248 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - Started XiaohashuNoteBizApplication in 7.903 seconds (process running for 8.789)
2024-11-21 21:41:49.313 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-21 21:41:49.314 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-21 21:41:49.315 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-11-21 21:41:49.336 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:41:49.343 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:41:49.463 [http-nio-8086-exec-1] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:41:49.538 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaohashu-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2024-11-21 21:41:49.588 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaohashu-distributed-id-generator -> [{"ip":"192.168.117.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2024-11-21 21:41:49.599 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaohashu-distributed-id-generator -> [{"ip":"192.168.117.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2024-11-21 21:42:03.500 [nacos-grpc-client-executor-192.168.117.200-20] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Receive server push request, request = NotifySubscriberRequest, requestId = 25
2024-11-21 21:42:03.501 [nacos-grpc-client-executor-192.168.117.200-20] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Ack server push request, request = NotifySubscriberRequest, requestId = 25
2024-11-21 21:42:03.505 [nacos-grpc-client-executor-192.168.117.200-23] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Receive server push request, request = NotifySubscriberRequest, requestId = 26
2024-11-21 21:42:03.506 [nacos-grpc-client-executor-192.168.117.200-23] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Ack server push request, request = NotifySubscriberRequest, requestId = 26
2024-11-21 21:42:03.508 [nacos-grpc-client-executor-192.168.117.200-24] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Receive server push request, request = NotifySubscriberRequest, requestId = 27
2024-11-21 21:42:03.508 [nacos-grpc-client-executor-192.168.117.200-24] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Ack server push request, request = NotifySubscriberRequest, requestId = 27
2024-11-21 21:42:03.725 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaohashu-kv, group:DEFAULT_GROUP, clusters: 
2024-11-21 21:42:03.731 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaohashu-kv -> [{"ip":"192.168.117.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2024-11-21 21:42:03.733 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaohashu-kv -> [{"ip":"192.168.117.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000,"ipDeleteTimeout":30000}]
2024-11-21 21:43:00.925 [nacos-grpc-client-executor-192.168.117.200-27] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Receive server push request, request = NotifySubscriberRequest, requestId = 28
2024-11-21 21:43:00.925 [nacos-grpc-client-executor-192.168.117.200-27] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Ack server push request, request = NotifySubscriberRequest, requestId = 28
2024-11-21 21:43:00.929 [nacos-grpc-client-executor-192.168.117.200-28] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Receive server push request, request = NotifySubscriberRequest, requestId = 29
2024-11-21 21:43:00.930 [nacos-grpc-client-executor-192.168.117.200-28] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Ack server push request, request = NotifySubscriberRequest, requestId = 29
2024-11-21 21:43:00.930 [http-nio-8086-exec-1] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request fail, errorCode: NOTE-20001, errorMessage: 笔记发布失败
2024-11-21 21:43:00.936 [nacos-grpc-client-executor-192.168.117.200-30] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Receive server push request, request = NotifySubscriberRequest, requestId = 30
2024-11-21 21:43:00.936 [nacos-grpc-client-executor-192.168.117.200-30] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Ack server push request, request = NotifySubscriberRequest, requestId = 30
2024-11-21 21:43:00.940 [nacos-grpc-client-executor-192.168.117.200-31] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Receive server push request, request = NotifySubscriberRequest, requestId = 31
2024-11-21 21:43:00.940 [nacos-grpc-client-executor-192.168.117.200-31] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Ack server push request, request = NotifySubscriberRequest, requestId = 31
2024-11-21 21:43:00.946 [nacos-grpc-client-executor-192.168.117.200-32] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Receive server push request, request = NotifySubscriberRequest, requestId = 32
2024-11-21 21:43:00.947 [nacos-grpc-client-executor-192.168.117.200-32] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Ack server push request, request = NotifySubscriberRequest, requestId = 32
2024-11-21 21:43:00.953 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:43:00.956 [nacos-grpc-client-executor-192.168.117.200-33] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Receive server push request, request = NotifySubscriberRequest, requestId = 33
2024-11-21 21:43:00.962 [nacos-grpc-client-executor-192.168.117.200-33] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Ack server push request, request = NotifySubscriberRequest, requestId = 33
2024-11-21 21:43:00.965 [nacos-grpc-client-executor-192.168.117.200-34] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Receive server push request, request = NotifySubscriberRequest, requestId = 34
2024-11-21 21:43:00.965 [nacos-grpc-client-executor-192.168.117.200-34] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Ack server push request, request = NotifySubscriberRequest, requestId = 34
2024-11-21 21:43:00.968 [nacos-grpc-client-executor-192.168.117.200-35] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Receive server push request, request = NotifySubscriberRequest, requestId = 35
2024-11-21 21:43:00.968 [nacos-grpc-client-executor-192.168.117.200-35] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Ack server push request, request = NotifySubscriberRequest, requestId = 35
2024-11-21 21:43:00.971 [nacos-grpc-client-executor-192.168.117.200-36] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Receive server push request, request = NotifySubscriberRequest, requestId = 36
2024-11-21 21:43:00.971 [nacos-grpc-client-executor-192.168.117.200-36] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Ack server push request, request = NotifySubscriberRequest, requestId = 36
2024-11-21 21:43:00.973 [nacos-grpc-client-executor-192.168.117.200-37] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Receive server push request, request = NotifySubscriberRequest, requestId = 37
2024-11-21 21:43:00.975 [nacos-grpc-client-executor-192.168.117.200-37] INFO  com.alibaba.nacos.common.remote.client - [61bf27aa-0d6f-4f19-9eca-772c7ad182e0] Ack server push request, request = NotifySubscriberRequest, requestId = 37
2024-11-21 21:43:07.863 [http-nio-8086-exec-2] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:43:07.863 [http-nio-8086-exec-2] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:43:07.866 [http-nio-8086-exec-2] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:43:15.010 [http-nio-8086-exec-2] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request fail, errorCode: NOTE-20001, errorMessage: 笔记发布失败
2024-11-21 21:43:15.011 [http-nio-8086-exec-2] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:43:47.396 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-21 21:43:47.396 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-21 21:43:47.397 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-21 21:43:47.397 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-21 21:43:47.469 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-21 21:43:47.469 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-note with instance: Instance{instanceId='null', ip='192.168.117.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-21 21:43:47.473 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-21 21:43:47.475 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-21 21:43:47.475 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-21 21:43:47.475 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-21 21:43:47.475 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-21 21:43:47.475 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-21 21:43:47.475 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-21 21:43:47.475 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-21 21:43:47.475 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-21 21:43:47.475 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 21:43:47.475 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 21:43:47.475 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-21 21:43:47.475 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-21 21:43:47.475 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 21:43:47.475 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 21:43:47.475 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-21 21:43:47.475 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-21 21:43:47.476 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@4c735134[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-21 21:43:47.476 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1732196476780_192.168.117.1_63277
2024-11-21 21:43:47.477 [nacos-grpc-client-executor-192.168.117.200-49] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1732196476780_192.168.117.1_63277]Ignore complete event,isRunning:false,isAbandon=false
2024-11-21 21:43:47.480 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@33f37e46[Running, pool size = 5, active threads = 0, queued tasks = 0, completed tasks = 50]
2024-11-21 21:43:47.480 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@3201fd9c[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 29]
2024-11-21 21:43:47.480 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-21 21:43:47.480 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-21 21:43:47.480 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-21 21:43:47.496 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-21 21:43:47.503 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-21 21:43:51.067 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 21:43:51.135 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 21:43:51.898 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 21:43:51.910 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 21:43:51.911 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - The following 1 profile is active: "dev"
2024-11-21 21:43:52.518 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-21 21:43:52.521 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-21 21:43:52.542 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2024-11-21 21:43:52.725 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=ea3fe939-9a36-30f3-8f6f-986e5a3af943
2024-11-21 21:43:52.764 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.kv.api.NoteContentFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 21:43:52.766 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.arnanzz.xiaohashu.distributed.id.generator.api.DistributedGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-21 21:43:53.297 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-21 21:43:53.307 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-21 21:43:53.307 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-21 21:43:53.398 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-21 21:43:53.399 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1471 ms
2024-11-21 21:43:53.494 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-21 21:43:53.930 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-21 21:43:54.229 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 21:43:54.285 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-21 21:43:56.070 [main] WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-11-21 21:43:56.157 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-21 21:43:56.165 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-21 21:43:56.165 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-21 21:43:56.166 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-21 21:43:56.166 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-21 21:43:56.190 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-21 21:43:56.190 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-21 21:43:56.191 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-21 21:43:56.195 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-21 21:43:56.195 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-21 21:43:56.198 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-21 21:43:56.208 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of b3ce9d69-fb1d-47c0-84c1-abafdc7816d4
2024-11-21 21:43:56.232 [main] INFO  com.alibaba.nacos.common.remote.client - [b3ce9d69-fb1d-47c0-84c1-abafdc7816d4] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-21 21:43:56.232 [main] INFO  com.alibaba.nacos.common.remote.client - [b3ce9d69-fb1d-47c0-84c1-abafdc7816d4] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-21 21:43:56.232 [main] INFO  com.alibaba.nacos.common.remote.client - [b3ce9d69-fb1d-47c0-84c1-abafdc7816d4] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-21 21:43:56.235 [main] INFO  com.alibaba.nacos.common.remote.client - [b3ce9d69-fb1d-47c0-84c1-abafdc7816d4] Try to connect to server on start up, server: {serverIp = '192.168.117.200', server main port = 8848}
2024-11-21 21:43:56.271 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.117.200 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-21 21:43:57.379 [main] INFO  com.alibaba.nacos.common.remote.client - [b3ce9d69-fb1d-47c0-84c1-abafdc7816d4] Success to connect to server [192.168.117.200:8848] on start up, connectionId = 1732196637271_192.168.117.1_63383
2024-11-21 21:43:57.382 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [b3ce9d69-fb1d-47c0-84c1-abafdc7816d4] Notify connected event to listeners.
2024-11-21 21:43:57.382 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-21 21:43:57.382 [main] INFO  com.alibaba.nacos.common.remote.client - [b3ce9d69-fb1d-47c0-84c1-abafdc7816d4] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-21 21:43:57.383 [main] INFO  com.alibaba.nacos.common.remote.client - [b3ce9d69-fb1d-47c0-84c1-abafdc7816d4] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1263/0x000000080150d180
2024-11-21 21:43:57.385 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-note with instance Instance{instanceId='null', ip='192.168.117.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-21 21:43:57.487 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-note 192.168.117.1:8086 register finished
2024-11-21 21:43:57.852 [main] INFO  c.a.xiaohashu.note.biz.XiaohashuNoteBizApplication - Started XiaohashuNoteBizApplication in 7.855 seconds (process running for 8.703)
2024-11-21 21:47:47.426 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-21 21:47:47.427 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-21 21:47:47.428 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-11-21 21:47:47.439 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:47:47.444 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:47:47.542 [http-nio-8086-exec-1] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:47:47.610 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaohashu-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2024-11-21 21:47:47.646 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaohashu-distributed-id-generator -> [{"ip":"192.168.117.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-21 21:47:47.657 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaohashu-distributed-id-generator -> [{"ip":"192.168.117.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-21 21:47:50.581 [nacos-grpc-client-executor-192.168.117.200-72] INFO  com.alibaba.nacos.common.remote.client - [b3ce9d69-fb1d-47c0-84c1-abafdc7816d4] Receive server push request, request = NotifySubscriberRequest, requestId = 40
2024-11-21 21:47:50.581 [nacos-grpc-client-executor-192.168.117.200-72] INFO  com.alibaba.nacos.common.remote.client - [b3ce9d69-fb1d-47c0-84c1-abafdc7816d4] Ack server push request, request = NotifySubscriberRequest, requestId = 40
2024-11-21 21:47:50.596 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaohashu-kv, group:DEFAULT_GROUP, clusters: 
2024-11-21 21:47:50.601 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaohashu-kv -> [{"ip":"192.168.117.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-21 21:47:50.601 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaohashu-kv -> [{"ip":"192.168.117.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaohashu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-21 21:47:51.103 [nacos-grpc-client-executor-192.168.117.200-74] INFO  com.alibaba.nacos.common.remote.client - [b3ce9d69-fb1d-47c0-84c1-abafdc7816d4] Receive server push request, request = NotifySubscriberRequest, requestId = 41
2024-11-21 21:47:51.103 [nacos-grpc-client-executor-192.168.117.200-74] INFO  com.alibaba.nacos.common.remote.client - [b3ce9d69-fb1d-47c0-84c1-abafdc7816d4] Ack server push request, request = NotifySubscriberRequest, requestId = 41
2024-11-21 21:47:52.735 [http-nio-8086-exec-1] WARN  c.a.x.note.biz.exception.GlobalExceptionHandler - /note/publish request fail, errorCode: NOTE-20001, errorMessage: 笔记发布失败
2024-11-21 21:47:52.743 [http-nio-8086-exec-1] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:48:17.759 [http-nio-8086-exec-2] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:48:17.759 [http-nio-8086-exec-2] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:48:17.761 [http-nio-8086-exec-2] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":0,"imgUris":["http://124.70.38.88:9000/xiaohashu/d792807e6d06472792d65ca7b652e8c6.png"],"videoUri":null,"title":"图文笔记测试标题","content":"图文笔记测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:48:28.417 [http-nio-8086-exec-2] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [笔记发布], 耗时: 10657ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-21 21:48:28.420 [http-nio-8086-exec-2] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:50:51.152 [http-nio-8086-exec-4] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 6
2024-11-21 21:50:51.153 [http-nio-8086-exec-4] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 6
2024-11-21 21:50:51.155 [http-nio-8086-exec-4] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":1,"imgUris":null,"videoUri":"http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg","title":"图文视频测试标题","content":"图文视频测试内容","topicId":1}, 请求类: NoteController, 请求方法: publishNote =================================== 
2024-11-21 21:50:54.572 [http-nio-8086-exec-4] INFO  c.a.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [笔记发布], 耗时: 3419ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-21 21:50:54.573 [http-nio-8086-exec-4] INFO  c.a.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 6
2024-11-21 21:51:13.176 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-21 21:51:13.176 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-21 21:51:13.176 [Thread-7] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-21 21:51:13.177 [Thread-10] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-21 21:51:13.223 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-21 21:51:13.223 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-note with instance: Instance{instanceId='null', ip='192.168.117.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-21 21:51:13.229 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-21 21:51:13.229 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-21 21:51:13.229 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-21 21:51:13.230 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-21 21:51:13.230 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-21 21:51:13.230 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-21 21:51:13.230 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-21 21:51:13.230 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-21 21:51:13.230 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-21 21:51:13.230 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 21:51:13.231 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 21:51:13.231 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-21 21:51:13.231 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-21 21:51:13.231 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-21 21:51:13.231 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-21 21:51:13.231 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-21 21:51:13.231 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-21 21:51:13.231 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@90d12d[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-21 21:51:13.231 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1732196637271_192.168.117.1_63383
2024-11-21 21:51:13.236 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@3c0bc0ae[Running, pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 117]
2024-11-21 21:51:13.236 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@35ee2e19[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 141]
2024-11-21 21:51:13.236 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-21 21:51:13.236 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-21 21:51:13.237 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-21 21:51:13.268 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-21 21:51:13.275 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
